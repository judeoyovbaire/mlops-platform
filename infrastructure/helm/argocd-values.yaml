# ArgoCD Helm Chart Values

# Server configuration
server:
  replicas: 1

  # Ingress
  ingress:
    enabled: false

  # Resource limits
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Controller configuration
controller:
  replicas: 1
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Repo server
repoServer:
  replicas: 1
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Application Set Controller
applicationSet:
  enabled: true
  replicas: 1

# Notifications (optional)
notifications:
  enabled: false

# Dex (SSO - disabled by default)
dex:
  enabled: false

# Redis
redis:
  enabled: true
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi

# Global configurations
configs:
  params:
    # Enable status badge
    server.enable.gzip: true

  cm:
    # Application reconciliation timeout
    timeout.reconciliation: 180s

    # Resource customizations for Seldon
    resource.customizations: |
      machinelearning.seldon.io/SeldonDeployment:
        health.lua: |
          hs = {}
          if obj.status ~= nil then
            if obj.status.state == "Available" then
              hs.status = "Healthy"
              hs.message = "Seldon Deployment is available"
            elseif obj.status.state == "Creating" then
              hs.status = "Progressing"
              hs.message = "Seldon Deployment is being created"
            else
              hs.status = "Degraded"
              hs.message = obj.status.description
            end
          end
          return hs
